# Objective Model

Being very clear and focused on your goals with customers is critical, and now you can track objectives and the health per objective.

Pro-tip: use your average Objective health in the Health Score!

## Model Fields

| Property | Required | Type | Description |
|----------|----------|------|-------------|
| _id |  | objectId | Planhat identifier |
| name | Yes | string | Objective name |
| health |  | number | Objective health |
| companyId | Yes | objectId | Related company id (planhat identifier) |
| companyName |  | string | Company name. (Autogenerated) |
| externalId |  | string | The objective id in your own system |
| sourceId |  | string | The objective id from an integration (Sales Force, Hubspot, etc) |
| custom |  | object | Custom object with your custom properties |

## POST Create Objective

Create an objective by defining a name and a valid companyId. You can reference the company externalId or sourceId using the following command structure: "companyId": "extid-[company externalId]" or "companyId": "srcid-[company sourceId]".

### Endpoint Details
- **URL:** `POST /objectives`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request POST 'https://api.planhat.com/objectives' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}' \
--data-raw '{
  "name": "Objective name",
  "health": 5,
  "companyId": "60df26bfa259250cba9cf816",
  "externalId": 1234,
  "sourceId": "sfc-1234",
  "custom": {
    "field": "custom field"
  }
}'
```

### Example Response

```json
{
  "_id": "60faeda853b8f717ebe36146",
  "name": "Objective name",
  "health": 5,
  "companyId": "60df26bfa259250cba9cf816",
  "externalId": "1234",
  "sourceId": "sfc-1234",
  "custom": {
    "field": "custom field"
  },
  "companyName": "Test Company"
}
```

## GET Single Objective

Retrieve a specific objective by its ID. Alternatively, you can get an objective using its externalId and/or sourceId by adding a prefix: "extid-[externalId]" or "srcid-[sourceId]".

### Endpoint Details
- **URL:** `GET /objectives/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request GET 'https://api.planhat.com/objectives/5ffcce42ad67267f66741147' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```

### Example Response

```json
{
  "_id": "5ffcce42ad67267f66741147",
  "companyId": "56bccdf554d64d837d01be9d",
  "companyName": "Tenet",
  "name": "Gold objective",
  "health": 5,
  "__v": 0,
  "custom": {
    "Comments": "",
    "Main Product": [
      "Recipe Database"
    ],
    "Days in Phase": 0,
    "NRR30": 0,
    "t123": "undefined",
    "Logins": 0,
    "Overall Outlet Health": 4,
    "Kary FF": null
  },
  "externalId": "4467",
  "usage": {
    "6053b728fa96fa0262729a3d": 0,
    "6053ba62ca3eaf023a54d268": 0
  }
}
```

## GET Multiple Objectives

Retrieve a list of objectives with optional filtering and pagination.

### Endpoint Details
- **URL:** `GET /objectives`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)
- **Max Results:** 2,000 objectives per request

### Query Parameters
- `companyId` - Filter using company id
- `limit` - Limit the list length. Default: 100, Max: 2,000
- `offset` - Start the list on a specific integer index
- `sort` - Sort based on a specific property. Prefix the property with "-" to change the sort order
- `select` - Select specific properties. Multiple properties can be specified separating them by commas

### Example Request

```bash
curl --location --request GET 'https://api.planhat.com/objectives?limit=2&offset=0&sort=-name&select=_id,name,health,companyId' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```

### Example Response

```json
[
  {
    "_id": "60fb0869694ea374023924cb",
    "companyId": "56bccdf554d64d837d01be4a",
    "name": "ZPA Product",
    "health": 5
  },
  {
    "_id": "601c0a253e5ed41388982528",
    "companyId": "6011889f52181c5640bf41ba",
    "name": "Trello.io",
    "health": 4
  }
]
```

## PUT Update Objective

Update an existing objective by passing the objective _id in the request URL as a parameter. Alternatively, you can update using the objective externalId and/or sourceId by adding a prefix: "extid-[externalId]" or "srcid-[sourceId]".

### Endpoint Details
- **URL:** `PUT /objectives/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request PUT 'https://api.planhat.com/objectives/60faeda853b8f717ebe36146' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}' \
--data-raw '{
  "name": "Objective name 2"
}'
```

### Example Response

```json
{
  "_id": "60ff061d681a6b4da9248694",
  "name": "Objective name 2",
  "health": 5,
  "companyId": "60df26bfa259250cba9cf816",
  "externalId": "12323",
  "companyName": "Test Company",
  "__v": 0,
  "sourceId": "12323"
}
```

## PUT Bulk Upsert Objectives

Bulk create and/or update multiple objectives. To update an objective it is required to specify in the payload one of the following keyables, listed in order of priority: _id, sourceId, externalId.

### Endpoint Details
- **URL:** `PUT /objectives`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)
- **Max Items:** 5,000 objectives per request

### Example Request

```bash
curl --location --request PUT 'https://api.planhat.com/objectives' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}' \
--data-raw '[
  {
    "name": "Objective name",
    "companyId": "60df26bfa259250cba9cf816",
    "health": 4,
    "externalId": 1234,
    "sourceId": "sfc-1234",
    "custom": {
      "field": "custom field"
    }
  },
  {
    "name": "Objective name 2",
    "companyId": "60df26bfa259250cba9cf816",
    "health": 5,
    "externalId": 1235,
    "sourceId": "sfc-1235",
    "custom": {
      "field": "custom field"
    }
  }
]'
```

### Example Response

```json
{
  "created": 2,
  "createdErrors": [],
  "insertsKeys": [
    {
      "_id": "60fde9ad57df5b411cf39be5",
      "sourceId": "sfc-1234",
      "externalId": "1234"
    },
    {
      "_id": "60fde9ad57df5b411cf39be6",
      "sourceId": "sfc-1235",
      "externalId": "1235"
    }
  ],
  "updated": 0,
  "updatedErrors": [],
  "updatesKeys": [],
  "nonupdates": 0,
  "modified": [],
  "upsertedIds": [
    "60fde9ad57df5b411cf39be5",
    "60fde9ad57df5b411cf39be6"
  ],
  "permissionErrors": []
}
```

## DELETE Objective

Delete an objective by passing the _id in the request URL as a parameter.

### Endpoint Details
- **URL:** `DELETE /objectives/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request DELETE 'https://api.planhat.com/objectives/60faeda853b8f717ebe36146' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```
```