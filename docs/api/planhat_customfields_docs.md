# Custom Field Model

Most objects in Planhat can be customized by creating your own custom fields. Which model a given custom field belongs to is indicated by the parent property.

Typically you would create the custom fields from within the Planhat app. But in some special cases you may find it more convenient to manage over API instead.

## Model Fields

| Property | Required | Type | Description |
|----------|----------|------|-------------|
| _id |  | objectId | Planhat identifier |
| name | Yes | string | Name of the custom field |
| type | Yes | string | Type of the custom field, it should be one of: number, text, rich text, checkbox, day, date, list, multipicklist, team member, team members, rating, phone, email, enduser, endusers, url |
| parent | Yes | string | Parent phModel |
| isFeatured |  | boolean | If true the custom field will appear in the parent's detail view. Default as false |
| isHidden | Yes | boolean | If true the custom field will not appear in any parent's view. Default as false |
| isShared |  | boolean | If true the custom field will be shareable on portal. Default as false |
| isLocked |  | boolean | If true the custom field will not be editable on the UI. Default as false |
| isMandatory |  | boolean | If true the custom field will be required to create the parent's model. Default as false |
| isFormula |  | boolean | True if the custom field is a formula field. Default as false |
| treatUndefinedAsZero |  | boolean | If the custom field is a formula field, this will determine if a formula result null/undefined is replaced by zero. This is useful for custom fields type number |
| formula |  | string | Formula definition |
| listValues |  | array | Array of options for list and multipick custom types |
| filter |  | array | Array of parts (objects) of the filter. (Autogenerated) |
| formulaRefs |  | array | Array of strings of the formula field references. (Autogenerated) |
| numberFormat |  | string | Custom number format, this is only valid for number types |

## POST Create Custom Field

Create a new custom field by defining a name, parent, and type.

### Endpoint Details
- **URL:** `POST /customfields`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request POST 'https://api.planhat.com/customfields' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}' \
--data-raw '{
  "parent": "company",
  "type": "number",
  "isFeatured": true,
  "isHidden": false,
  "name": "Number field",
  "isFormula": false,
  "isLocked": false
}'
```

### Example Response

```json
{
  "isFeatured": true,
  "isShared": false,
  "listValues": [],
  "filter": [],
  "formulaRefs": [],
  "isFormula": false,
  "_id": "61043ced0b92efb8a6339cd1",
  "parent": "company",
  "type": "number",
  "isHidden": false,
  "name": "Number field",
  "isLocked": false,
  "__v": 0
}
```

## GET Single Custom Field

Retrieve a specific custom field by its ID.

### Endpoint Details
- **URL:** `GET /customfields/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request GET 'https://api.planhat.com/customfields/5c94de4752e54d5ce538ae18' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```

### Example Response

```json
{
  "_id": "5c94de4752e54d5ce538ae18",
  "isFeatured": true,
  "listValues": [],
  "parent": "invoice",
  "type": "text",
  "isHidden": false,
  "name": "PO Number"
}
```

## GET Multiple Custom Fields

Retrieve a list of custom fields with optional filtering and pagination.

### Endpoint Details
- **URL:** `GET /customfields`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)
- **Max Results:** 2,000 custom fields per request

### Query Parameters
- `limit` - Limit the list length. Default: 100, Max: 2,000
- `offset` - Start the list on a specific integer index
- `sort` - Sort based on a specific property. Prefix the property with "-" to change the sort order
- `select` - Select specific properties. Multiple properties can be specified separating them by commas

### Example Request

```bash
curl --location --request GET 'https://api.planhat.com/customfields?limit=2&offset=0' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```

### Example Response

```json
[
  {
    "_id": "5c8a24fdc923c77bf64dc567",
    "isFeatured": false,
    "listValues": [],
    "parent": "company",
    "type": "number",
    "isHidden": false,
    "name": "Hours Invested",
    "isShared": false,
    "filter": [],
    "sortOrder": 9,
    "isLocked": false
  },
  {
    "_id": "5c94de4752e54d5ce538ae18",
    "isFeatured": true,
    "listValues": [],
    "parent": "invoice",
    "type": "text",
    "isHidden": false,
    "name": "PO Number"
  }
]
```

## PUT Update Custom Field

Update an existing custom field by passing the custom field _id in the request URL as a parameter.

### Endpoint Details
- **URL:** `PUT /customfields/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request PUT 'https://api.planhat.com/customfields/61043ced0b92efb8a6339cd1' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}' \
--data-raw '{
  "isFeatured": false,
  "isHidden": true
}'
```

### Example Response

```json
{
  "_id": "61043ced0b92efb8a6339cd1",
  "isFeatured": false,
  "isShared": false,
  "listValues": [],
  "filter": [],
  "formulaRefs": [],
  "isFormula": false,
  "parent": "company",
  "type": "number",
  "isHidden": true,
  "name": "Number field",
  "isLocked": false,
  "__v": 0
}
```

## DELETE Custom Field

Delete a custom field by passing the _id in the request URL as a parameter.

### Endpoint Details
- **URL:** `DELETE /customfields/{id}`
- **Authentication:** Bearer token required
- **Rate Limits:** 200 calls/minute (soft), 150 req/sec (hard)

### Example Request

```bash
curl --location --request DELETE 'https://api.planhat.com/customfields/61043ced0b92efb8a6339cd1' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer {{apiToken}}'
```